---
title: "Lab 05 - La Quinta is Spanish for next to Denny's, Pt. 2"
author: "Tsion"
date: "02/16/2026"
output: github_document
---

### Load packages and data

```{r load-packages, message = FALSE}
library(tidyverse) 
library(readr) 
library(dsbox)
```

#Not sure why dsbox is not working for me, had to manually load the data files again.

```{r load-data, message = FALSE}
states <- read_csv("data/states.csv")
dennys <- read_csv("data/dennys.csv")
laquinta <- read_csv("data/laquinta.csv")
```

```{r for-easier-coding}
dn <- dennys
lq <- laquinta
```

```{r check-data}
names(dn)
names(lq)
```

### Exercise 1

```{r filter-Alaska}
dn_ak <- dn %>%
  filter (state == "AK")
nrow(dn_ak)

lq_ak <- lq %>%
  filter (state == "AK")
nrow(lq_ak)
```

There are `r nrow(dn_ak)` Denny's and `r nrow(lq_ak)` La Quinta locations in the state of Alaska. 

### Exercise 2

```{r claculate-number-of-pairings}
nrow(dn_ak) * nrow(lq_ak)
```

There are `r nrow(dn_ak) * nrow(lq_ak)` pairings between all Denny's and all La Quinta locations in Alaska. 

### Exercise 3

```{r join-two-dataframes}
# we want to keep all rows and columns from both data frames. 
dn_lq_ak <- full_join(dn_ak, lq_ak,
    by = "state")
dn_lq_ak
```


### Exercise 4

```{r check-joined-dataframe}
nrow(dn_lq_ak)
names(dn_lq_ak)
```

There are `r nrow(dn_lq_ak)` observations in the joined data frame. The variables are address, city, state, zip, longitude, and latitiude for each pairing of Denny's and La Quinta labbelled as (x) and (y) for all variables (except state).

### Exercise 5

#We use the mutate function to add new variable to a data frame while keeping other viarbales constant. 

### Exercise 6

```{r load-haversine}
haversine <- function(long1, lat1, long2, lat2, round = 3) {
  # convert to radians
  long1 <- long1 * pi / 180
  lat1 <- lat1 * pi / 180
  long2 <- long2 * pi / 180
  lat2 <- lat2 * pi / 180

  R <- 6371 # Earth mean radius in km

  a <- sin((lat2 - lat1) / 2)^2 + cos(lat1) * cos(lat2) * sin((long2 - long1) / 2)^2
  d <- R * 2 * asin(sqrt(a))

  return(round(d, round)) # distance in km
}
```

```{r calculate-distance-between-all-pairs}
dn_lq_ak <- dn_lq_ak %>%
  mutate (
    distance = haversine(longitude.x,latitude.x,
                         longitude.y, latitude.y)
  )
```

The following are the calculated distances between all pairs of Denny’s and La Quinta locations in Alaska: `r dn_lq_ak$distance`.

### Exercise 7

```{r calculate-minimum-distance}
#Group by Denny’s locations and calculate a new variable for min.distance. 
dn_lq_ak_minidist <- dn_lq_ak %>%
  group_by(address.x) %>%
  summarise(
    mini_dist = min(distance, na.rm = TRUE), 
    .groups = "drop"
  )

dn_lq_ak_minidist
```


### Exercise 8


### Exercise 9


### Exercise 10


### Exercise 11


### Exercise 12


